{% extends 'base.html.twig' %}

{% block title %}
	{{ 'Administration'|trans }}
	| Bricolage
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<style>
		.admin-gradient-card {
			background: white;
			border: none;
			border-radius: 20px;
			transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
		}
		.admin-gradient-card:hover {
			transform: scale(1.02);
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
		}
		.stat-pill {
			width: 60px;
			height: 60px;
			border-radius: 18px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.5rem;
			color: white;
			box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.1);
		}
		.bg-gradient-indigo {
			background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
		}
		.bg-gradient-purple {
			background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
		}
		.bg-gradient-pink {
			background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
		}

		.card-header-glass {
			background: rgba(255, 255, 255, 0.4);
			backdrop-filter: blur(10px);
			border-bottom: 1px solid rgba(0, 0, 0, 0.05);
			padding: 1.5rem 2rem;
			border-top-left-radius: 20px !important;
			border-top-right-radius: 20px !important;
		}

		.user-avatar-initial {
			width: 45px;
			height: 45px;
			background: #f1f5f9;
			border-radius: 12px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-weight: 700;
			color: #64748b;
		}

		.premium-table thead th {
			text-transform: uppercase;
			font-size: 0.75rem;
			letter-spacing: 1px;
			font-weight: 700;
			color: #94a3b8;
			padding: 1rem 1.5rem;
			border-bottom: 2px solid #f1f5f9;
		}

		.premium-table tbody td {
			padding: 1rem 1.5rem;
			vertical-align: middle;
		}
	</style>
{% endblock %}

{% block body %}
	<div
		class="container py-5 mt-4">
		{# Header #}
		<div class="row mb-5 align-items-center">
			<div class="col-md-6">
				<h6 class="text-accent-primary fw-bold text-uppercase mb-2" style="color: var(--accent-primary) !important;">{{ 'Zone Administrative'|trans }}</h6>
				<h1 class="display-5 fw-bold mb-0 text-primary-color" style="color: var(--primary-color) !important;">{{ 'Tableau de Bord'|trans }}</h1>
				<p class="text-muted mt-2 fs-5">{{ 'Gérez votre plateforme avec des outils professionnels.'|trans }}</p>
			</div>
			<div class="col-md-6 text-md-end">
				<div class="d-inline-flex align-items-center glass-card p-3 rounded-pill">
					<div class="rounded-circle bg-success me-3" style="width: 12px; height: 12px; box-shadow: 0 0 15px #198754;"></div>
					<span class="fw-bold text-dark me-2">{{ 'Serveur opérationnel'|trans }}</span>
					<span class="badge bg-light text-muted border rounded-pill">{{ "now"|date("H:i") }}</span>
				</div>
			</div>
		</div>

		{# Statistics Grid #}
		<div class="row g-4 mb-5">
			<div class="col-lg-4">
				<div class="card admin-gradient-card shadow-sm h-100">
					<div class="card-body p-4 p-xl-5">
						<div class="d-flex justify-content-between align-items-start mb-4">
							<div class="stat-pill bg-gradient-indigo">
								<i class="fas fa-bullhorn"></i>
							</div>
							<span class="badge bg-soft-indigo text-accent-primary rounded-pill px-3 py-2" style="background: rgba(99, 102, 241, 0.1);">{{ 'Total'|trans }}</span>
						</div>
						<h2 class="display-4 fw-black mb-1" style="font-weight: 800;">{{ totalAnnonces }}</h2>
						<p class="text-muted fw-bold text-uppercase small mb-0">{{ 'Annonces Publiées'|trans }}</p>
					</div>
				</div>
			</div>
			<div class="col-lg-4">
				<div class="card admin-gradient-card shadow-sm h-100">
					<div class="card-body p-4 p-xl-5">
						<div class="d-flex justify-content-between align-items-start mb-4">
							<div class="stat-pill bg-gradient-purple">
								<i class="fas fa-hammer"></i>
							</div>
							<span class="badge text-purple rounded-pill px-3 py-2" style="background: rgba(168, 85, 247, 0.1); color: #a855f7;">{{ 'Talents'|trans }}</span>
						</div>
						<h2 class="display-4 fw-black mb-1" style="font-weight: 800;">{{ totalChercheurs }}</h2>
						<p class="text-muted fw-bold text-uppercase small mb-0">{{ 'Experts Inscrits'|trans }}</p>
					</div>
				</div>
			</div>
			<div class="col-lg-4">
				<div class="card admin-gradient-card shadow-sm h-100">
					<div class="card-body p-4 p-xl-5">
						<div class="d-flex justify-content-between align-items-start mb-4">
							<div class="stat-pill bg-gradient-pink">
								<i class="fas fa-building"></i>
							</div>
							<span class="badge text-pink rounded-pill px-3 py-2" style="background: rgba(236, 72, 153, 0.1); color: #ec4899;">{{ 'Clients'|trans }}</span>
						</div>
						<h2 class="display-4 fw-black mb-1" style="font-weight: 800;">{{ totalRecruteurs }}</h2>
						<p class="text-muted fw-bold text-uppercase small mb-0">{{ 'Recruteurs Actifs'|trans }}</p>
					</div>
				</div>
			</div>
		</div>

		{# Table Views #}
		<div class="row g-4">
			<div class="col-xl-7">
				<div class="card border-0 shadow-sm rounded-4 overflow-hidden">
					<div class="card-header bg-white p-4 d-flex justify-content-between align-items-center">
						<h5 class="fw-bold mb-0">
							<i class="fas fa-sync text-muted me-2"></i>
							{{ 'Derniers Experts'|trans }}</h5>
						<a href="{{ path('app_chercheur') }}" class="btn btn-sm btn-light rounded-pill px-3 fw-bold">{{ 'Voir tous'|trans }}</a>
					</div>
					<div class="card-body p-0">
						<div class="table-responsive">
							<table class="table premium-table align-middle mb-0">
								<thead>
									<tr>
										<th>{{ 'Utilisateur'|trans }}</th>
										<th>{{ 'ID'|trans }}</th>
										<th>{{ 'Action'|trans }}</th>
									</tr>
								</thead>
								<tbody>
									{% for c in recentChercheurs %}
										<tr>
											<td>
												<div class="d-flex align-items-center">
													<div class="user-avatar-initial me-3">
														{{ c.prenom|slice(0, 1)|upper }}
													</div>
													<div>
														<h6 class="mb-0 fw-bold">{{ c.prenom }}
															{{ c.nom }}</h6>
														<small class="text-muted">{{ c.email|slice(0, 20) }}...</small>
													</div>
												</div>
											</td>
											<td>
												<span class="font-monospace small text-muted">{{ c.idChercheur|slice(0, 8) }}</span>
											</td>
											<td>
												<button class="btn btn-sm btn-light rounded-pill">
													<i class="fas fa-eye"></i>
												</button>
											</td>
										</tr>
									{% else %}
										<tr>
											<td colspan="3" class="text-center py-4 text-muted">{{ 'Aucun chercheur inscrit.'|trans }}</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>

			<div class="col-xl-5">
				<div class="card border-0 shadow-sm rounded-4 overflow-hidden">
					<div class="card-header bg-white p-4 border-0">
						<h5 class="fw-bold mb-0">
							<i class="fas fa-briefcase text-muted me-2"></i>
							{{ 'Recruteurs Récents'|trans }}</h5>
					</div>
					<div class="card-body p-0">
						<ul class="list-group list-group-flush">
							{% for r in recentRecruteurs %}
								<li class="list-group-item p-4 border-0 border-bottom d-flex align-items-center justify-content-between">
									<div class="d-flex align-items-center">
										<div class="rounded-pill bg-light p-2 me-3" style="width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;">
											<i class="fas fa-building text-warning"></i>
										</div>
										<div>
											<h6 class="mb-0 fw-bold text-primary-color">{{ r.nom }}</h6>
											<small class="text-muted">{{ r.email|slice(0, 25) }}...</small>
										</div>
									</div>
									<a href="{{ path('app_recruteur') }}" class="btn btn-sm btn-light-primary rounded-circle" style="width: 32px; height: 32px; padding: 0;">
										<i class="fas fa-chevron-right small"></i>
									</a>
								</li>
							{% else %}
								<li class="list-group-item p-4 text-center text-muted">{{ 'Aucun recruteur inscrit.'|trans }}</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
