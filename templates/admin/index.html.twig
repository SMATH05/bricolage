{% extends 'base.html.twig' %}

{% block title %}Dashboard Admin | Bricolage
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<style>
		.dashboard-card {
			transition: all 0.3s ease;
			border: none;
			border-radius: 16px;
			overflow: hidden;
		}
		.dashboard-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1) !important;
		}
		.stat-card {
			background: white;
		}
		.icon-circle {
			width: 50px;
			height: 50px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.2rem;
			margin-bottom: 1rem;
		}
		.bg-gradient-primary-soft {
			background: linear-gradient(135deg, #434343 0%, #000000 100%);
		}
		.bg-gradient-success-soft {
			background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
		}
		.bg-gradient-warning-soft {
			background: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%);
		}
		.welcome-header {
			background: white;
			border-radius: 16px;
			padding: 2rem;
			box-shadow: 0 2px 15px rgba(0, 0, 0, 0.03);
			margin-bottom: 2rem;
			border-left: 5px solid #000000;
		}
		.action-link {
			text-decoration: none;
			color: inherit;
		}
	</style>
{% endblock %}
{% block body %}
	<div
		class="container py-5">
		{# Welcome Section #}
		<div class="welcome-header d-flex justify-content-between align-items-center animate__animated animate__fadeIn">
			<div>
				<h1 class="h2 fw-bold mb-1">Tableau de Bord</h1>
				<p class="text-muted mb-0">Bienvenue dans votre espace d'administration.</p>
			</div>
			<div class="text-end">
				<span class="badge bg-light text-dark border px-3 py-2 rounded-pill">
					<i class="fas fa-calendar-alt me-2"></i>
					{{ "now"|date("d M Y") }}
				</span>
			</div>
		</div>

		{# Quick Stats #}
		<div class="row g-4 mb-5">
			<div class="col-md-4">
				<div class="card stat-card shadow-sm border-0 p-4 rounded-4">
					<div class="d-flex align-items-center">
						<div class="icon-circle bg-primary-soft text-primary me-3 mb-0">
							<i class="fas fa-bullhorn"></i>
						</div>
						<div>
							<h3 class="fw-bold mb-0">{{ totalAnnonces }}</h3>
							<small class="text-muted text-uppercase fw-bold">Annonces</small>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="card stat-card shadow-sm border-0 p-4 rounded-4">
					<div class="d-flex align-items-center">
						<div class="icon-circle bg-success-soft text-success me-3 mb-0">
							<i class="fas fa-user-graduate"></i>
						</div>
						<div>
							<h3 class="fw-bold mb-0">{{ totalChercheurs }}</h3>
							<small class="text-muted text-uppercase fw-bold">Chercheurs</small>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="card stat-card shadow-sm border-0 p-4 rounded-4">
					<div class="d-flex align-items-center">
						<div class="icon-circle bg-warning-soft text-warning me-3 mb-0">
							<i class="fas fa-user-tie"></i>
						</div>
						<div>
							<h3 class="fw-bold mb-0">{{ totalRecruteurs }}</h3>
							<small class="text-muted text-uppercase fw-bold">Recruteurs</small>
						</div>
					</div>
				</div>
			</div>
		</div>
		{# Action Cards #}
		<h4 class="fw-bold mb-4 px-1">Gestion Rapide</h4>
		<div class="row g-4">
			<div class="col-md-4">
				<a href="{{ path('app_annonce') }}" class="action-link">
					<div class="card dashboard-card h-100 shadow-sm border-0">
						<div class="card-body p-4 text-center">
							<div class="icon-circle bg-primary text-white mx-auto mb-3" style="width: 70px; height: 70px; font-size: 1.5rem; background: linear-gradient(135deg, #434343 0%, #000000 100%);">
								<i class="fas fa-bullhorn"></i>
							</div>
							<h5 class="fw-bold">Gérer les Annonces</h5>
							<p class="text-muted small mb-0">Créer, modifier ou supprimer des offres.</p>
						</div>
					</div>
				</a>
			</div>
			<div class="col-md-4">
				<a href="{{ path('app_recruteur') }}" class="action-link">
					<div class="card dashboard-card h-100 shadow-sm border-0">
						<div class="card-body p-4 text-center">
							<div class="icon-circle bg-info text-white mx-auto mb-3" style="width: 70px; height: 70px; font-size: 1.5rem; background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);">
								<i class="fas fa-user-tie"></i>
							</div>
							<h5 class="fw-bold">Gérer les Recruteurs</h5>
							<p class="text-muted small mb-0">Administrer les comptes entreprises.</p>
						</div>
					</div>
				</a>
			</div>

			<div class="col-md-4">
				<a href="{{ path('app_chercheur') }}" class="action-link">
					<div class="card dashboard-card h-100 shadow-sm border-0">
						<div class="card-body p-4 text-center">
							<div class="icon-circle bg-success text-white mx-auto mb-3" style="width: 70px; height: 70px; font-size: 1.5rem; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
								<i class="fas fa-user-graduate"></i>
							</div>
							<h5 class="fw-bold">Gérer les Candidats</h5>
							<p class="text-muted small mb-0">Suivre les profils chercheurs d'emploi.</p>
						</div>
					</div>
				</a>
			</div>
			{# Recent Users #}
			<div class="row g-4 mt-5">
				<div class="col-md-6">
					<div class="card shadow-sm border-0 rounded-4">
						<div class="card-header bg-white p-4 border-0">
							<h5 class="fw-bold mb-0">Nouveaux Chercheurs</h5>
						</div>
						<div class="card-body p-0">
							<div class="list-group list-group-flush">
								{% for c in recentChercheurs %}
									<div class="list-group-item p-3 border-0 border-bottom">
										<div class="d-flex align-items-center">
											<div class="rounded-circle bg-primary-soft text-primary p-2 me-3">
												<i class="fas fa-user small"></i>
											</div>
											<div>
												<h6 class="mb-0 fw-bold">{{ c.prenom }}
													{{ c.nom }}</h6>
												<small class="text-muted">{{ c.email }}</small>
											</div>
										</div>
									</div>
								{% else %}
									<p class="p-4 text-muted small italic">Aucun chercheur inscrit.</p>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="card shadow-sm border-0 rounded-4">
						<div class="card-header bg-white p-4 border-0">
							<h5 class="fw-bold mb-0">Nouveaux Recruteurs</h5>
						</div>
						<div class="card-body p-0">
							<div class="list-group list-group-flush">
								{% for r in recentRecruteurs %}
									<div class="list-group-item p-3 border-0 border-bottom">
										<div class="d-flex align-items-center">
											<div class="rounded-circle bg-warning-soft text-warning p-2 me-3">
												<i class="fas fa-building small"></i>
											</div>
											<div>
												<h6 class="mb-0 fw-bold">{{ r.nom }}</h6>
												<small class="text-muted">{{ r.email }}</small>
											</div>
										</div>
									</div>
								{% else %}
									<p class="p-4 text-muted small italic">Aucun recruteur inscrit.</p>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	{% endblock %}
